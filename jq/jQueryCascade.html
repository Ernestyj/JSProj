<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<script src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
	<div id="container">
		<div class="box"><div class="content"><img src="img/1.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/2.jpeg"></div></div>
		<div class="box"><div class="content"><img src="img/3.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/4.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/5.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/6.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/7.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/8.jpg"></div></div>	
		<div class="box"><div class="content"><img src="img/9.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/10.png"></div></div>
		<div class="box"><div class="content"><img src="img/1.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/2.jpeg"></div></div>
		<div class="box"><div class="content"><img src="img/3.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/4.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/5.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/6.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/7.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/8.jpg"></div></div>	
		<div class="box"><div class="content"><img src="img/9.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/10.png"></div></div>
		<div class="box"><div class="content"><img src="img/1.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/2.jpeg"></div></div>
		<div class="box"><div class="content"><img src="img/3.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/4.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/5.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/6.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/7.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/8.jpg"></div></div>	
		<div class="box"><div class="content"><img src="img/9.jpg"></div></div>
		<div class="box"><div class="content"><img src="img/10.png"></div></div>
	</div>
</body>
<style>
*{
	margin: 0; padding: 0;
}.box{
	position: relative; float: left;
}.content{
	padding: 8px; border: 1px solid royalblue; box-shadow: 0 0 8px black; 
}.content img{
	width: 220px; height: auto;
}
</style>
<script>
	$(document).ready(function(){
		$(window).on("load", function(){
			imgLocation();
			var dataImg = {"data":[{"src":"1.jpg"}, {"src":"2.jpeg"}, {"src":"3.jpg"}, {"src":"4.jpg"}, {"src":"5.jpg"}, 
					{"src":"6.jpg"}, {"src":"7.jpg"}, {"src":"8.jpg"}, {"src":"9.jpg"}, {"src":"10.png"}]};
			window.onscroll = function(){
				if(scrollSide()){
					$.each(dataImg.data, function(index, value) {
						var box = $("<div></div>").addClass("box").appendTo($("#container"));
						var content = $("<div>").addClass("content").appendTo(box);
						$("<img></img>").attr("src", "img/" + $(value).attr("src")).appendTo(content);
					});
					imgLocation();
				}
			}
		});
	});
	function scrollSide(){
		var box = $(".box");
		var lastBoxHeight = box.last().get(0).offsetTop + Math.floor(box.last().height() / 2);
		var documentHeight = $(document).width();
		var scrollHeight = $(window).scrollTop();
		return (lastBoxHeight < scrollHeight + documentHeight) ? true:false;
	}
	function imgLocation(){
		var box = $(".box");
		var boxWidth = box.eq(0).width();
		var num = Math.floor($(window).width() / boxWidth);
		var boxArr = [];
		box.each(function(index, valueObject){
			var boxHeight = box.eq(index).height();
			if(index < num){
				boxArr[index] = boxHeight;
			}else{
				var minboxHeight = Math.min.apply(null, boxArr);
				var minboxIndex = $.inArray(minboxHeight, boxArr);
				$(valueObject).css({
					"position":"absolute", "top":minboxHeight, "left":box.eq(minboxIndex).position().left
				});
				boxArr[minboxIndex] += box.eq(index).height();
			}
		});
	}
</script>
</html>
